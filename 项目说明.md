# 法律文件脱敏智能体 - 第一阶段实现

## 功能概述

本项目第一阶段实现了PDF和Word文件的内容提取功能，用户可以通过网页对话界面上传文件，系统会自动提取并显示文件内容。

## 已实现功能

### 1. 文件上传与处理
- ✅ 支持PDF文件（.pdf）
- ✅ 支持Word文档（.docx, .doc）
- ✅ 拖拽上传和点击上传两种方式
- ✅ 文件类型验证和大小限制

### 2. 内容提取
- ✅ PDF内容提取（使用pdfplumber和PyMuPDF双重保障）
- ✅ Word文档内容提取（包括段落和表格）
- ✅ 文档元数据提取（页数、创建时间、作者等）
- ✅ 异步处理，避免阻塞

### 3. 用户界面
- ✅ 现代化聊天界面设计
- ✅ 实时上传进度显示
- ✅ 文件内容可视化预览
- ✅ 响应式设计，支持移动端

## 技术架构

### 后端 (Python + FastAPI)
```
backend/
├── main.py              # FastAPI应用主文件
├── file_processor.py    # 文件处理核心模块
├── requirements.txt     # Python依赖
└── uploads/            # 文件上传临时目录
```

### 前端 (React + TypeScript)
```
frontend/
├── src/
│   ├── App.tsx         # 主应用组件
│   ├── App.css         # 样式文件
│   ├── index.tsx       # 应用入口
│   └── index.css       # 全局样式
├── public/
│   └── index.html      # HTML模板
└── package.json        # 前端依赖
```

## 快速开始

### 1. 自动安装和启动
```bash
# 运行启动脚本
./start.sh
```

### 2. 手动启动

#### 后端服务器
```bash
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
python main.py
```

#### 前端服务器
```bash
cd frontend
npm install
npm start
```

### 3. 访问应用
打开浏览器访问: http://localhost:3000

## API接口

### 文件上传
```
POST /api/upload
Content-Type: multipart/form-data

参数:
- file: 上传的文件（PDF或Word）

返回:
{
  "file_id": "唯一文件ID",
  "filename": "原文件名",
  "content_type": "文件类型",
  "size": "文件大小（字节）",
  "upload_time": "上传时间",
  "content": "提取的文本内容",
  "metadata": {
    "pages": "页数（PDF）",
    "paragraphs": "段落数（Word）",
    "tables": "表格数（Word）",
    "extraction_method": "提取方法"
  },
  "message": "处理结果消息"
}
```

### 健康检查
```
GET /api/health

返回:
{
  "status": "healthy",
  "timestamp": "当前时间"
}
```

## 支持的文件格式

| 格式 | 扩展名 | MIME类型 | 提取方法 |
|------|--------|----------|----------|
| PDF | .pdf | application/pdf | pdfplumber + PyMuPDF |
| Word 2007+ | .docx | application/vnd.openxmlformats-officedocument.wordprocessingml.document | python-docx |
| Word 97-2003 | .doc | application/msword | python-docx |

## 特色功能

### 1. 智能文件处理
- **多引擎支持**: PDF提取使用双引擎（pdfplumber优先，PyMuPDF备用）
- **内容完整性**: 支持提取段落、表格、元数据
- **异步处理**: 不阻塞用户界面，提供流畅体验

### 2. 用户体验优化
- **拖拽上传**: 直接拖拽文件到界面
- **实时反馈**: 上传进度和处理状态实时显示
- **内容预览**: 格式化显示提取的文本内容
- **元数据展示**: 显示文件详细信息

### 3. 安全性考虑
- **临时存储**: 文件处理完成后自动删除
- **类型验证**: 严格的文件类型检查
- **错误处理**: 完善的异常处理机制

## 下一步计划

根据项目架构设计，后续将实现：

1. **实体识别模块**: 识别姓名、身份证号、手机号等敏感信息
2. **脱敏处理引擎**: 多种脱敏策略（遮盖、伪匿名化、泛化）
3. **一致性映射**: 跨文档同一实体一致化处理
4. **可视化比对**: 原文vs脱敏后对比预览
5. **导出功能**: 支持多种格式导出
6. **审计日志**: 完整的操作追踪

## 技术特点

- **模块化设计**: 易于扩展和维护
- **容错机制**: 多重备用方案确保稳定性
- **性能优化**: 异步处理和内存管理
- **现代化UI**: 响应式设计和良好的用户体验

## 问题反馈

如遇到问题，请检查：
1. Python版本是否为3.8+
2. Node.js版本是否为16+
3. 依赖是否正确安装
4. 端口8000和3000是否被占用
